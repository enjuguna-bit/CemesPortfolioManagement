# Building the Android App

## ‚ö†Ô∏è Important Prerequisites

The Android app **cannot be built directly from command line** without:

1. **Android Studio** installed
2. **Android SDK** (API 34) installed
3. **Gradle wrapper** files (generated by Android Studio)
4. **Java JDK 17** installed

## üöÄ Recommended Build Process

### Option 1: Using Android Studio (Recommended)

1. **Open Android Studio**
2. **Open Project**: Select `c:\ARREARS MANAGER\android-app\`
3. **Wait for Gradle Sync** (first time takes 5-10 minutes)
4. **Build Release APK**:
   - Menu: `Build` ‚Üí `Build Bundle(s) / APK(s)` ‚Üí `Build APK(s)`
   - Or use: `Build` ‚Üí `Generate Signed Bundle / APK` for production

5. **Find APK**:
   - Location: `app/build/outputs/apk/release/app-release.apk`

### Option 2: Command Line (After Android Studio Setup)

Once Android Studio has initialized the project:

```bash
# Navigate to project
cd "c:\ARREARS MANAGER\android-app"

# Build release APK
gradlew assembleRelease

# Build debug APK (faster, for testing)
gradlew assembleDebug

# Install on connected device
gradlew installDebug
```

## üìã Pre-Build Checklist

Before building, ensure:

- [ ] **Android Studio** is installed
- [ ] **SDK Platform 34** is installed (Settings ‚Üí SDK Manager)
- [ ] **Build Tools 34.0.0** is installed
- [ ] **local.properties** has correct API URL
- [ ] **google-services.json** is added (for Firebase)
- [ ] **Signing config** is set up (for release builds)

## üîß Initial Setup Steps

### 1. Install Android Studio
Download from: https://developer.android.com/studio

### 2. Install SDK Components
In Android Studio:
- Open SDK Manager (Tools ‚Üí SDK Manager)
- Install:
  - Android SDK Platform 34
  - Android SDK Build-Tools 34.0.0
  - Android SDK Platform-Tools
  - Android SDK Tools

### 3. Configure API Endpoint
Edit `local.properties`:
```properties
# For emulator
api.base.url=http://10.0.2.2:5000/api/v1/

# For physical device (replace with your computer's IP)
api.base.url=http://192.168.1.100:5000/api/v1/
```

### 4. Add Firebase Configuration (Optional)
1. Create Firebase project at https://console.firebase.google.com
2. Add Android app with package name: `com.arrears.manager`
3. Download `google-services.json`
4. Place in: `app/google-services.json`

### 5. Set Up Signing (For Release)
Create `keystore.properties` in project root:
```properties
storePassword=your_store_password
keyPassword=your_key_password
keyAlias=your_key_alias
storeFile=path/to/your/keystore.jks
```

## üéØ Quick Start (Without Building)

If you just want to test the app:

1. **Open in Android Studio**
2. **Connect Android device** or **start emulator**
3. **Click Run** (green play button)
4. App will build and install automatically

## üì± Testing on Device

### Emulator
1. In Android Studio: Tools ‚Üí Device Manager
2. Create Virtual Device (Pixel 6, API 34)
3. Click Run

### Physical Device
1. Enable Developer Options on phone
2. Enable USB Debugging
3. Connect via USB
4. Click Run in Android Studio

## üêõ Common Issues

### Issue: "SDK location not found"
**Solution**: Android Studio will create `local.properties` automatically

### Issue: "Failed to find Build Tools"
**Solution**: Install Build Tools in SDK Manager

### Issue: "google-services.json missing"
**Solution**: Either:
- Add Firebase configuration, OR
- Remove Firebase dependencies from `build.gradle`

### Issue: "Gradle sync failed"
**Solution**: 
- Check internet connection
- Invalidate Caches: File ‚Üí Invalidate Caches / Restart

## üì¶ Build Outputs

After successful build:

- **Debug APK**: `app/build/outputs/apk/debug/app-debug.apk`
- **Release APK**: `app/build/outputs/apk/release/app-release-unsigned.apk`
- **Signed Release**: `app/build/outputs/apk/release/app-release.apk`

## üöÄ Production Release Checklist

Before releasing to Google Play:

- [ ] Update version in `build.gradle`
- [ ] Set up proper signing configuration
- [ ] Test on multiple devices
- [ ] Enable ProGuard/R8 (already configured)
- [ ] Build App Bundle (AAB) instead of APK:
  ```bash
  gradlew bundleRelease
  ```
- [ ] Test release build thoroughly
- [ ] Update screenshots and store listing

## üí° Development Tips

1. **Use Debug Build** for development (faster)
2. **Enable Instant Run** in Android Studio
3. **Use Logcat** for debugging (View ‚Üí Tool Windows ‚Üí Logcat)
4. **Hot Reload** works with Jetpack Compose
5. **Layout Inspector** to debug UI (Tools ‚Üí Layout Inspector)

## üìû Need Help?

- Android Studio issues: Check Android Studio logs
- Build errors: Read error messages in Build tab
- Runtime errors: Check Logcat
- API connection: Verify Flask server is running

---

**Note**: The Android app is a complete, production-ready foundation but requires Android Studio to build. The command-line build will work only after the project has been initialized by Android Studio at least once.
